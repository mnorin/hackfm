#!/bin/bash
# statusbar.class - Status bar using ba.sh (delegates to fkeybar)

# Load fkeybar
. fkeybar.h

__STATUSBAR___properties=()

__STATUSBAR__.property(){
    # Property indices
    local row=0
    local width=1
    
    if [ "$2" = "=" ]; then
        __STATUSBAR___properties[$1]="$3"
    else
        echo "${__STATUSBAR___properties[$1]}"
    fi
}

# Property accessors
__STATUSBAR__.row(){
    if [ "$1" = "=" ]; then
        __STATUSBAR__.property row = "$2"
    else
        __STATUSBAR__.property row
    fi
}

__STATUSBAR__.width(){
    if [ "$1" = "=" ]; then
        __STATUSBAR__.property width = "$2"
    else
        __STATUSBAR__.property width
    fi
}

# Internal fkeybar instance (created on first render)
__STATUSBAR___fkeybar_created=0

# Render method
__STATUSBAR__.render(){
    local row=$(__STATUSBAR__.row)
    local width=$(__STATUSBAR__.width)
    
    # Create fkeybar instance if not already created
    if [ $__STATUSBAR___fkeybar_created -eq 0 ]; then
        fkeybar __STATUSBAR___fkeybar
        __STATUSBAR___fkeybar_created=1
    fi
    
    # Set position and width
    __STATUSBAR___fkeybar.row = $row
    __STATUSBAR___fkeybar.width = $width
    
    # Render with file manager keys: Help, (empty), View, Edit, Copy, Move, Mkdir, Delete, (empty), Quit
    __STATUSBAR___fkeybar.render "Help" "" "View" "Edit" "Copy" "Move" "Mkdir" "Delete" "" "Quit"
}
